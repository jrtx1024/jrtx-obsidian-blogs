---
{"dg-publish":true,"dg-path":"编程语言/Scheme 语言足以用于产品开发.md","permalink":"/编程语言/Scheme 语言足以用于产品开发/","created":"2025-06-04T18:38:26.256+08:00","updated":"2025-06-04T18:48:34.379+08:00"}
---

#Innolight

在过去十年里，我一直试图在产品环境中使用 Scheme 编程语言。围绕 Scheme 的现有传说总是令人着迷、充满矛盾且神秘。然而，尽管 Scheme 在学术界很出名，但我确信只有少数人尝试过它在产品中的应用。因为我没看到太多关于在产品开发中使用 Scheme 所讨论的问题。大多数人只是跟从别人的观点。而更少的人讨论真正的问题，以及如何处理这些问题。

我的选择是 GNU Guile，我也使用过其他 Scheme 实现。当然，我的经验有限，这并不意味着 GNU Guile 已经成熟到可以取代 Python。我的意见不仅适用于 GNU Guile，也适用于其他 Scheme 实现。我建议你看看 Chez Scheme、Racket、Chicken Scheme……来了解 Scheme 社区在过去二十年的进展。

所以这篇文章不会告诉你为什么选择 Scheme 而不是 Python。不，这不是正确的方式。我们讨论的是，如果你已经注意到函数式编程的趋势，并且想看看一些著名的函数式编程语言，这篇文章可能会帮助你了解 Scheme 在产品中的力量。

# 陈词滥调的问题：为什么要使用 Scheme？

有很多答案。我必须节省时间来一一列举。如果你不熟悉 Scheme 社区，这里是你应该知道的事情。

- Scheme 提供了很高的表达能力，可以编写轻松的代码来降低复杂性。
- 在业务逻辑中，低级细节不是主要问题，Scheme 提供了快速开发的好方法。
- 复杂性较低会带来更少的错误，但这并不意味着 Scheme 代码中没有致命错误，这取决于程序员的水平。
- Scheme 容易理解。这在我们需要分析程序来调试时很重要。
- Scheme 是一种标准化的语言，其语法和标准 API 都定义得非常清晰。
- 完整的 lambda 演算支持。当需要时，lambda 组合提供了更好的表达能力。
- 从专业软件开发的角度来看，Scheme 值得投资。我将在本文中证明这一点。

# 第一个错觉：很难找到 Scheme 程序员

嗯，是的，直接招聘专业的 Scheme 程序员很难。能用 Scheme 进行产品开发的人并不多。

五年前，当我第一次尝试组建 Scheme 团队时，我也曾担心这个问题。然而两个月后，我发现这根本不是问题。我们可以低成本地培养一名 Scheme 程序员。所以这里是我关于招聘的简短故事。

当时，我们用 C++14 进行系统编程，用 Scheme 进行业务逻辑脚本。现在我担心招聘 Scheme 程序员有多难，我的想法只是询问 C++中的函数式编程部分。如今，C++有很多函数式特性，所以 C++程序员必须了解一些 FP。这是潮流，对吧？

如果候选人足够优秀能够获得我们的录用通知，我会在新人培训中教他们《计算机程序设计艺术》。当然，《计算机程序设计艺术》对于新人来说是一本很厚的书，所以我只挑选了前两章。"数据抽象"是为了理解面向对象，而"过程抽象"的概念是为了提升算法实现能力。我们在《计算机程序设计艺术》中舍弃了"元语言抽象"和"机器抽象"，因为我们当时没有做编译器业务（我们现在做了，那又是另一个我稍后会讲述的故事）。

培训持续了一个月。培训结束后，他们开始进行产品上的小工作，修复 bug 或添加小功能。《计算机程序设计艺术》不仅是一本书，更是一个由深刻思想创建的规范化教育体系。因此我们可以利用这个体系，快速完成培训，并在你的大脑记忆还新鲜时将所学应用到日常工作中。

《计算机程序设计艺术》教育体系能帮助我们短时间内培养出优秀的 Scheme 程序员。任何技术公司都应该有新人培训期，我们可以用一个月的时间完成。这是一个好且经济的解决方案。我们已经这样使用了五年，效果一直很好。

想想看，我们在这项培训上花了零钱，而且我们很快就把 SICP 的知识转化成产品了。

# 第二个错觉：Scheme 不是快的

那已经不成立了，你听说过 Chez Scheme 吗？

很多年前，当我还是研究生的时候，我一直被编程语言的速度所吸引。

当我成为专业开发者时，我意识到编程中至少有三种速度：

1. 学习速度：零基础学习一门语言的难易程度？
2. 开发速度：能否尽可能减少编码工作量？
3. 执行速度：它执行有多快？

了解到这些，我突然明白为什么 Ruby on Rails 在网页开发中如此受欢迎，尽管它被认为是一种慢速语言。

如果我们只考虑执行速度，汇编语言甚至机器语言会是更好的选择。

# 第三种错觉：生态系统对一种语言来说是最重要的

我的朋友，请，不要再相信这个推测了。在实际工作中它并不成立。

如果你想要一个真实的故事，这里就是：语言是一个生态系统中最重要的一部分。

Python 生态系统只属于 Python 语言。Python 拥有庞大的生态系统是出于历史原因，但这并不意味着其他语言也需要一个同等庞大的生态系统。

只有一个真正的生态系统，那就是 C 生态系统。动态语言模块只是现有 C 库的绑定。

所以如果一个语言有良好的 FFI（外部函数接口）支持，它就可以利用所有的 C 库。如今，人们可能更关注分布式处理。分布式系统可以是异构的，因此我们不必只在一个生态系统中构建所有东西。

在另一方面，一个大型生态系统可能包含足够多的软件包，但这并不意味着所有这些软件包及其依赖项都具有良好的质量和维护。我们不应该对它抱有任何盲目的信任。

所以让我打破这种幻想，一个生态系统在某些情况下可能很重要，但并不是语言最重要的因素。当我们创建一种语言时，我们只考虑其范式、语法、表达能力和优化惩罚。这些因素对一种编程语言来说是最重要的。

在过去，编程语言是由一家公司创建和推动的。人们没有理由在不获得任何报酬的情况下为其生态系统做出贡献。因此，对于商业化编程语言社区来说，生态系统很重要，否则它将缓慢发展，投资将被浪费。如今，编程语言主要由 FOSS（自由和开源软件）社区推动。在 FOSS 的力量下，生态系统自然地发展起来。有经验的开发者会担心一种语言的表达能力，因为它决定了你的编码效率。

# 缺点 1：Scheme 尚未准备好用于深度学习

今天，深度学习很火。我想介绍一个用 GNU Guile 编写、基于 LLVM JIT 和 TensorFlow 的项目——AISCM。它有效，很酷，我也为它提交过一些补丁。不过，我没有太多时间投入其中。所以如果你希望认真用 Scheme 进行深度学习，我建议你为 AISCM 做贡献。

警告，AISCM 中已经存在一个中间代码库。它还包含对 OpenCV、FFmpeg 的支持。感谢作者 Jan Wedekind。

在另一个 Scheme 实现中，我对他们在深度学习方面的进展了解得较少。但这只是我目光短浅的问题。

# 缺点 2：Scheme 社区已经碎片化

由于历史原因，存在许多 Scheme 实现，但社区较为分散。如今，我们看到了一些希望。

首先，过去十年 Scheme 标准化取得了良好进展。R7RS 将 Scheme 划分为小语言和大语言。在我看来，这是一步好棋。因为它既保留了 Scheme 的极简主义，又提供了一种使 Scheme 成为工业级库规范的方法。

我的业务依赖于 R7RS-small，它简直就是为我们的业务量身定做的。我稍后会详细说明。

另一个希望是现代的包管理器。

对我来说，我选择 GNU Guix，一个用 GNU Guile 编写的函数式包管理器。GNU Guile 的大部分库都可以用 GNU Guix 安装。包管理器创建了生态系统。实际上，我们不会说“生态系统”，因为这是一个商业概念。GNU 是一个操作系统社区。

当然，Racket 和 Chicken Scheme 也有一个不错的包管理器。这有助于它们形成一个良好的社区。

无论如何，一致的标准规范和酷炫的包管理器或许能解决社区碎片化的问题。但这需要时间。

# 缺点 3：Scheme 不是纯粹的

函数式编程爱好者可能希望使用纯粹的函数式编程语言，这意味着没有副作用。

是的，Scheme 不是纯粹的，它是一种多范式语言，而不仅仅是函数式编程语言。但它提供了其他纯粹语言中可以找到的完整函数式特性。尽管 Scheme 中有副作用，但你可以决定使用什么以及何时使用。我认为禁止人们使用副作用不是一个好主意。人们应该有自由选择使用语言的方式。Scheme 提供了这种自由，这可能好也可能坏。但无论如何，你可以自由选择。

# 优点 1：Scheme 适合 Web 开发

如今，大多数 GUI 程序都被 SaaS 取代了。这就是我提到 Web 开发而不是传统 GUI 开发的原因。

2013 年，我开始编写 GNU Artanis，这是一个在 GNU Guile 中的现代 Web 框架。那时，我只想用 Scheme 做一些简单的 Web 案例。

我没有料到 GNU Artanis 能帮我完成物流机器人系统的工业级 SOA（架构服务），但它确实做到了。现在，GNU Artanis 已经不再是一小段代码了。它包含了 URL 重映射、关系映射、HTML 模板、异步协程服务器核心、与现代 JavaScript 前端框架（如 React）的集成等。你可以在一分钟内构建你的网站或服务。

Racket 和 Chicken Scheme 在网页开发方面也有很好的机会。在我开始编写 GNU Artanis 之前，我使用 Chicken Scheme 进行过网页编程。

# 优点 2：Scheme 值得以低成本进行投资

Scheme 在学术界已经进行了数十年的深入研究。从嵌入式系统到分布式服务器开发，有大量的 Scheme 论文展示了积极的成果。

所以人们会问一个问题，对于这样一种好的语言，学习和使用它有多难？答案已经在“第一印象”部分给出了：

实际上，我们在 Scheme 培训上没有花一分钱，而且有一个很好的教育体系 SICP，我们可以将知识在短时间内转化为产品。

零花钱的故事是真的，因为我没花多少时间亲自培训他们，所以没有计算我的工资。当然，我们会讨论编程问题，但大多数讨论都是围绕通用编程，而不是 Scheme 特定的。如果你学过 Scheme，他们自己就能流利地写 Scheme 代码，你不会怀疑这一点。

成本如此之低，尝试一下也无妨。

# 优点 3：Scheme 能节省你的编码时间

作为一名经验丰富的 C/C++程序员，我必须说我们不应该在非系统编程部分浪费时间用 C/C++编写代码。业务逻辑可能会根据需求变化。用 C/C++编写所有内容并不灵活。不要浪费时间在重构和调试上。

Scheme 具有强大的表达能力，可以帮助你减少编码工作。

但这取决于你如何使用它。

如果你期待有大量库能帮你节省工作量，那么 Scheme 并不是你的选择。通常，这只是为了概念验证。你可以选择 Python。

如果你使用 Scheme 进行脚本编写，并且依赖于你的 C/C++代码库，那么这是一个很好的选择。Scheme 是极简主义的，很容易作为系统中的脚本代码嵌入。

# 优点 4：用真正的计算机科学知识组建你的团队

当你再次在代码评审中抱怨糟糕的编码时，你是否意识到你从未给团队成员机会去掌握真正的计算机科学知识来进行严肃的编程？Scheme 可以提供这样的机会，而且它很容易学习，最终它足以用于产品中。

最后，要明智地选择你的武器。而且，多样化学习更多事物也不是坏事。